<linkset>
  <html:link rel="localization" href="__addonRef__-preferences.ftl" />
  <html:link rel="localization" href="__addonRef__-rules.ftl" />
</linkset>
<vbox
  id="__addonRef__"
  onload="Zotero.__addonInstance__.hooks.onPrefsEvent('load', {window})"
>
  <!-- 一般设置 -->
  <groupbox>
    <label><html:h2 data-l10n-id="section-general" /></label>
    <!-- 添加时自动执行格式化 -->
    <checkbox
      data-l10n-id="lint-on-item-added"
      preference="lint.onAdded"
      native="true"
    />
    <!-- 添加时自动执行格式化（群组条目） -->
    <checkbox
      data-l10n-id="lint-on-groupItem-added"
      preference="lint.onGroup"
      native="true"
    />
    <!-- 格式化时 -->
    <checkbox
      data-l10n-id="notify-on-lint"
      preference="lint.notify"
      native="true"
    />
  </groupbox>

  <groupbox>
    <!-- 是否启用富文本工具 -->
    <label><html:h2 data-l10n-id="section-rich-text" /></label>
    <checkbox
      data-l10n-id="enable-richtext-toolbar"
      preference="richtext.toolBar"
      native="true"
    />
    <checkbox
      data-l10n-id="enable-richtext-preview"
      preference="richtext.preview"
      native="true"
    />
    <checkbox
      data-l10n-id="enable-richtext-hotkey"
      preference="richtext.hotkey"
      native="true"
    />
    <label data-l10n-id="richtext-restart-needed" style="font-size: 0.85em" />
  </groupbox>

  <!-- 详细设置 -->
  <groupbox>
    <!-- 条目 -->
    <groupbox>
      <label><html:h2 data-l10n-id="section-item" /></label>
      <!-- 检测是否存在重复条目 -->
      <checkbox
        data-l10n-id="rule-no-item-duplication"
        preference="rule.no-item-duplication"
        native="true"
      />
      <!-- 检测网页条目 -->
      <checkbox
        data-l10n-id="rule-no-article-webpage"
        preference="rule.no-article-webpage"
        native="true"
      />
      <!-- 检测预印本误存为期刊文章 -->
      <checkbox
        data-l10n-id="rule-no-journal-preprint"
        preference="rule.no-journal-preprint"
        native="true"
      />
      <!-- 字段值不得为无效值 -->
      <checkbox
        data-l10n-id="rule-no-value-nullish"
        preference="rule.no-value-nullish"
        native="true"
      />
    </groupbox>

    <!-- 字段：标题 -->
    <groupbox>
      <label><html:h2 data-l10n-id="section-title" /></label>
      <!-- 需要短标题 -->
      <checkbox
        data-l10n-id="rule-require-short-title"
        preference="rule.require-short-title"
        native="true"
      />
      <!-- 修改标题大小写 -->
      <checkbox
        data-l10n-id="rule-correct-title-sentence-case"
        preference="rule.correct-title-sentence-case"
        native="true"
      />
      <vbox class="indented-pref">
        <checkbox
          data-l10n-id="rule-correct-shortTitle-sentence-case"
          preference="rule.correct-shortTitle-sentence-case"
          native="true"
        />
        <hbox align="center">
          <label
            data-l10n-id="rule-correct-title-sentence-option-custom-term"
          />
          <html:input
            style="flex: 1"
            type="text"
            readonly="true"
            size="50"
            data-l10n-id="rule-correct-title-sentence-option-custom-term"
            preference="rule.correct-title-sentence-case.custom-term-path"
          />
          <button
            data-l10n-id="rule-correct-title-sentence-option-custom-term-button"
            id="__addonRef__-title-choose-custom-data-button"
            native="true"
          />
        </hbox>
        <description
          data-l10n-id="rule-correct-title-sentence-option-custom-term-desc"
          style="width: 45em"
        />
      </vbox>
      <checkbox
        data-l10n-id="rule-no-title-trailing-dot"
        preference="rule.no-title-trailing-dot"
        native="true"
      />
    </groupbox>

    <!-- 字段：作者 -->
    <groupbox>
      <label><html:h2 data-l10n-id="section-creators" /></label>
      <!-- 修改作者大小写 -->
      <checkbox
        data-l10n-id="rule-correct-creators-case"
        preference="rule.correct-creators-case"
        native="true"
      />
      <!-- 修改作者中文拼音是否拆分 -->
      <checkbox
        data-l10n-id="rule-correct-creators-pinyin"
        preference="rule.correct-creators-pinyin"
        native="true"
      />
    </groupbox>

    <!-- 字段：语言 -->
    <groupbox>
      <label><html:h2 data-l10n-id="section-language" /></label>
      <checkbox
        data-l10n-id="rule-require-language"
        preference="rule.require-language"
        native="true"
      />
      <vbox class="indented-pref">
        <checkbox
          id="__addonRef__-lang-only"
          data-l10n-id="rule-require-language-option-only"
          preference="rule.require-language.only"
          native="true"
        />
        <vbox class="indented-pref">
          <hbox align="center">
            <checkbox
              id="__addonRef__-lang-only-cmn"
              data-l10n-id="rule-require-language-option-only-cmn"
              preference="rule.require-language.only.cmn"
              native="true"
            />
            <checkbox
              id="__addonRef__-lang-only-eng"
              data-l10n-id="rule-require-language-option-only-eng"
              preference="rule.require-language.only.eng"
              native="true"
            />
            <label data-l10n-id="rule-require-language-option-only-other" />
            <html:input
              type="text"
              id="__addonRef__-lang-only-other"
              preference="rule.require-language.only.other"
            />
            <label
              data-l10n-id="rule-require-language-option-only-other-doc"
              is="zotero-text-link"
              class="zotero-text-link"
              href="https://github.com/northword/zotero-format-metadata#readme"
            />
          </hbox>
          <description
            data-l10n-id="rule-require-language-option-only-other-desc"
            style="width: 45em"
          />
        </vbox>
      </vbox>
    </groupbox>

    <!-- 字段：日期 -->
    <groupbox>
      <label><html:h2 data-l10n-id="section-date" /></label>
      <!-- 更新日期格式 -->
      <checkbox
        data-l10n-id="rule-correct-date-format"
        preference="rule.correct-date-format"
        native="true"
      />
    </groupbox>

    <!-- 字段：期刊名 -->
    <groupbox>
      <label><html:h2 data-l10n-id="section-publicationTitle" /></label>
      <!-- 修正期刊名大小写 -->
      <checkbox
        data-l10n-id="rule-correct-publication-title"
        preference="rule.correct-publication-title"
        native="true"
      />
    </groupbox>

    <!-- 字段：缩写 -->
    <groupbox>
      <label><html:h2 data-l10n-id="section-abbr" /></label>
      <!-- 更新期刊缩写 -->
      <checkbox
        data-l10n-id="rule-require-journal-abbr"
        preference="rule.require-journal-abbr"
        native="true"
      />
      <vbox class="indented-pref">
        <checkbox
          id="__addonRef__-abbr-infer"
          data-l10n-id="rule-require-journal-abbr-option-infer"
          preference="rule.require-journal-abbr.infer"
          native="true"
        />
        <hbox align="center">
          <label data-l10n-id="rule-require-journal-abbr-option-usefull" />
          <checkbox
            id="__addonRef__-abbr-usefull"
            data-l10n-id="rule-require-journal-abbr-option-usefull-en"
            preference="rule.require-journal-abbr.usefull"
            native="true"
          />
          <checkbox
            id="__addonRef__-abbr-usefull"
            data-l10n-id="rule-require-journal-abbr-option-usefull-zh"
            preference="rule.require-journal-abbr.usefullZh"
            native="true"
          />
        </hbox>
      </vbox>
      <!-- 更新会议名简写 -->
      <checkbox
        data-l10n-id="rule-correct-conference-abbr"
        preference="rule.correct-conference-abbr"
        native="true"
      />

      <!-- 自定义缩写文件 -->
      <hbox align="center">
        <label
          data-l10n-id="rule-require-journal-abbr-option-custom-data-label"
        />
        <html:input
          style="flex: 1"
          type="text"
          readonly="true"
          size="50"
          id="__addonRef__-abbr-custom-path"
          data-l10n-id="rule-require-journal-abbr-option-choose-custom-abbr-data-input"
          preference="rule.require-journal-abbr.customDataPath"
        />
        <button
          data-l10n-id="rule-require-journal-abbr-option-choose-custom-abbr-data-button"
          id="__addonRef__-abbr-choose-custom-data-button"
          native="true"
        />
      </hbox>
      <description
        data-l10n-id="rule-require-journal-abbr-option-custom-data-desc"
        style="width: 45em"
      />
    </groupbox>

    <!-- 期卷页 -->
    <groupbox>
      <label><html:h2 data-l10n-id="section-pages" /></label>
      <!-- 去除期卷页0 -->
      <checkbox
        data-l10n-id="rule-no-issue-extra-zeros"
        preference="rule.no-issue-extra-zeros"
        native="true"
      />
      <checkbox
        data-l10n-id="rule-no-pages-extra-zeros"
        preference="rule.no-pages-extra-zeros"
        native="true"
      />
      <checkbox
        data-l10n-id="rule-no-volume-extra-zeros"
        preference="rule.no-volume-extra-zeros"
        native="true"
      />
      <!-- 页码连接符 -->
      <checkbox
        data-l10n-id="rule-correct-pages-connector"
        preference="rule.correct-pages-connector"
        native="true"
      />
    </groupbox>

    <!-- 标识符 -->
    <groupbox>
      <label><html:h2 data-l10n-id="section-identifier" /></label>
      <!-- DOI: 需要 DOI -->
      <checkbox
        data-l10n-id="rule-require-doi"
        preference="rule.require-doi"
        native="true"
      />
      <!-- DOI: 无前缀 -->
      <checkbox
        data-l10n-id="rule-no-doi-prefix"
        preference="rule.no-doi-prefix"
        native="true"
      />
      <!-- DOI: 应为长型 -->
      <checkbox
        data-l10n-id="rule-correct-doi-long"
        preference="rule.correct-doi-long"
        native="true"
      />
    </groupbox>

    <!-- 字段：学位论文相关 -->
    <groupbox>
      <label><html:h2 data-l10n-id="section-thesis" /></label>
      <!-- 纠正学位论文类别 -->
      <checkbox
        data-l10n-id="rule-correct-thesis-type"
        preference="rule.correct-thesis-type"
        native="true"
      />
      <!-- 更新大学字段 -->
      <checkbox
        data-l10n-id="rule-correct-university-punctuation"
        preference="rule.correct-university-punctuation"
        native="true"
      />
      <!-- 更新地点字段 -->
      <checkbox
        data-l10n-id="rule-require-university-place"
        preference="rule.require-university-place"
        native="true"
      />
    </groupbox>

    <!-- 字段：书籍相关 -->
    <groupbox>
      <label><html:h2 data-l10n-id="section-book" /></label>
      <!-- correct-edition-numeral -->
      <checkbox
        data-l10n-id="rule-correct-edition-numeral"
        preference="rule.correct-edition-numeral"
        native="true"
      />
      <!-- correct-value-numeral -->
      <checkbox
        data-l10n-id="rule-correct-volume-numeral"
        preference="rule.correct-volume-numeral"
        native="true"
      />
    </groupbox>
  </groupbox>

  <!-- 更新元数据 -->
  <groupbox>
    <label><html:h2 data-l10n-id="section-updateMetadata" /></label>
    <!-- 条目类型变更时要求确认 -->
    <checkbox
      data-l10n-id="tool-update-metadata-option-confirm-when-itemtype-change"
      preference="rule.tool-update-metadata.confirm-when-item-type-change"
      native="true"
    />
    <hbox align="center">
      <label data-l10n-id="tool-update-metadata-option-semanticScholarToken" />
      <html:input
        style="flex: 1"
        type="text"
        size="60"
        data-l10n-id="tool-update-metadata-option-semanticScholarToken"
        preference="semanticScholarToken"
      />
      <label
        data-l10n-id="tool-update-metadata-option-semanticScholarToken-link"
        is="zotero-text-link"
        class="zotero-text-link"
        href="https://www.semanticscholar.org/product/api#api-key"
      />
    </hbox>
    <description
      data-l10n-id="tool-update-metadata-option-semanticScholarToken-desc"
      style="width: 45em"
    />
  </groupbox>

  <!-- 关于 -->
  <groupbox>
    <label><html:h2>About</html:h2></label>
    <label
      data-l10n-id="help-version"
      data-l10n-args='{"time": "__buildTime__","name": "__addonName__","version":"__buildVersion__"}'
    />
  </groupbox>
</vbox>
